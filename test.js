const { EMA, BollingerBands, RSI } = require('technicalindicators');

// Dados de exemplo (preços de fechamento em intervalos de 1 minuto)
const closes = [
    26960.13000000,
    26957.54000000,
    26955.31000000,
    26955.31000000,
    26965.87000000,
    26968.55000000,
    26969.18000000,
    26969.18000000,
    26969.17000000,
    26973.17000000,
    26973.18000000,
    26975.83000000,
    26975.85000000,
    26985.91000000,
    26980.68000000,
    26980.68000000,
    26977.60000000,
    26981.13000000,
    26981.14000000,
    26981.14000000,
    26977.76000000,
    26966.27000000,
    26966.21000000,
    26964.92000000,
    26969.46000000,
    26971.90000000,
    26971.90000000,
    26971.90000000,
    26971.90000000,
    26974.63000000,
    26963.08000000,
    26957.66000000,
    26954.10000000,
    26957.13000000,
    26972.84000000,
    26970.01000000,
    26976.52000000,
    26974.08000000,
    26974.09000000,
    26974.09000000,
    26980.99000000,
    26987.88000000,
    26997.00000000,
    26993.72000000,
    26990.29000000,
    26988.74000000,
    26988.73000000,
    26986.98000000,
    26981.49000000,
    26981.38000000,
    26981.38000000,
    26981.38000000,
    26981.38000000,
    26989.92000000,
    26989.93000000,
    26989.93000000,
    26989.93000000,
    26991.07000000,
    26991.07000000,
    26991.07000000,
    26997.81000000,
    26999.99000000,
    26996.17000000,
    26995.41000000,
    26994.63000000,
    26993.62000000,
    26985.22000000,
    26985.22000000,
    26982.91000000,
    26980.59000000,
    26987.45000000,
    26986.83000000,
    26988.82000000,
    26993.32000000,
    26992.04000000,
    26986.30000000,
    26978.87000000,
    26985.62000000,
    26986.31000000,
    26986.31000000,
    26982.86000000,
    26991.41000000,
    26991.42000000,
    26997.27000000,
    26998.67000000,
    26998.67000000,
    27010.00000000,
    27008.96000000,
    27029.70000000,
    27020.19000000,
    27018.03000000,
    27011.78000000,
    27018.68000000,
    27016.39000000,
    27018.28000000,
    27018.28000000,
    27016.97000000,
    27012.13000000,
    27012.13000000,
    27013.91000000,
    27018.95000000,
    27013.92000000,
    27012.48000000,
    27010.24000000,
    27013.48000000,
    27013.48000000,
    27013.48000000,
    27013.99000000,
    27015.59000000,
    27018.41000000,
    27018.41000000,
    27021.50000000,
    27030.00000000,
    27025.60000000,
    27025.60000000,
    27025.97000000,
    27026.58000000,
    27030.99000000,
    27029.16000000,
    27019.83000000,
    27020.84000000,
    27024.69000000,
    27032.92000000,
    27032.02000000,
    27032.02000000,
    27044.87000000,
    27040.67000000,
    27035.40000000,
    27029.67000000,
    27034.04000000,
    27034.29000000,
    27035.29000000,
    27036.29000000,
    27036.28000000,
    27028.88000000,
    27035.43000000,
    27040.10000000,
    27040.09000000,
    27040.10000000,
    27041.37000000,
    27041.37000000,
    27044.06000000,
    27047.74000000,
    27046.51000000,
    27041.76000000,
    27044.48000000,
    27046.02000000,
    27046.03000000,
    27039.04000000,
    27039.52000000,
    27039.52000000,
    27039.51000000,
    27028.22000000,
    27022.17000000,
    27024.17000000,
    27025.70000000,
    27023.51000000,
    27018.43000000,
    27020.13000000,
    27023.26000000,
    27022.18000000,
    27022.19000000,
    27022.19000000,
    27022.17000000,
    27022.17000000,
    27028.22000000,
    27026.89000000,
    27032.96000000,
    27038.66000000,
    27038.65000000,
    27038.66000000,
    27030.42000000,
    27030.42000000,
    27029.42000000,
    27025.88000000,
    27025.88000000,
    27025.88000000,
    27025.89000000,
    27025.88000000,
    27025.89000000,
    27028.20000000,
    27025.90000000,
    27025.91000000,
    27025.89000000,
    27021.78000000,
    27021.77000000,
    27021.78000000,
    27018.01000000,
    27018.01000000,
    27018.00000000,
    27018.01000000,
    27018.49000000,
    27019.04000000,
    27012.91000000,
    27013.91000000,
    27013.92000000,
    27015.84000000,
    27025.68000000,
    27028.54000000,
    27026.68000000,
    27026.67000000,
    27026.64000000,
    27026.65000000,
    27028.52000000,
    27028.53000000,
    27039.54000000,
    27047.99000000,
    27047.99000000,
    27041.39000000,
    27041.38000000,
    27041.39000000,
    27041.38000000,
    27044.53000000,
    27047.96000000,
    27046.61000000,
    27046.60000000,
    27046.60000000,
    27046.61000000,
    27046.61000000,
    27046.60000000,
    27041.66000000,
    27041.66000000,
    27041.66000000,
    27044.93000000,
    27032.32000000,
    27031.26000000,
    27031.26000000,
    27031.25000000,
    27033.01000000,
    27034.89000000,
    27034.90000000,
    27043.66000000,
    27043.73000000,
    27047.23000000,
    27047.24000000,
    27047.24000000,
    27044.76000000,
    27044.76000000,
    27044.76000000,
    27044.76000000,
    27047.23000000,
    27040.68000000,
    27045.60000000,
    27045.60000000,
    27041.11000000,
    27041.10000000,
    27041.10000000,
    27041.11000000,
    27033.70000000,
    27021.90000000,
    27027.04000000,
    27027.54000000,
    27029.19000000,
    27029.20000000,
    27026.45000000,
    27023.96000000,
    27025.35000000,
    27029.76000000,
    27029.77000000,
    27029.76000000,
    27027.95000000,
    27027.52000000,
    27027.46000000,
    27027.37000000,
    27027.38000000,
    27028.48000000,
    27032.68000000,
    27032.69000000,
    27032.68000000,
    27032.69000000,
    27031.21000000,
    27026.47000000,
    27026.47000000,
    27029.02000000,
    27031.20000000,
    27026.48000000,
    27027.51000000,
    27027.52000000,
    27028.60000000,
    27030.71000000,
    27033.26000000,
    27033.33000000,
    27033.27000000,
    27030.73000000,
    27030.72000000,
    27034.10000000,
    27035.40000000,
    27035.78000000,
    27035.77000000,
    27035.77000000,
    27040.74000000,
    27041.42000000,
    27041.42000000,
    27041.23000000,
    27041.23000000,
    27041.23000000,
    27046.73000000,
    27045.46000000,
    27045.46000000,
    27045.47000000,
    27045.47000000,
    27042.39000000,
    27042.39000000,
    27042.39000000,
    27045.44000000,
    27045.43000000,
    27045.44000000,
    27045.44000000,
    27045.43000000,
    27045.44000000,
    27045.43000000,
    27045.43000000,
    27045.44000000,
    27045.44000000,
    27045.43000000,
    27045.44000000,
    27045.43000000,
    27045.44000000,
    27044.42000000,
    27043.65000000,
    27045.99000000,
    27049.99000000,
    27051.83000000,
    27056.80000000,
    27059.26000000,
    27056.15000000,
    27059.51000000,
    27069.75000000,
    27069.75000000,
    27069.76000000,
    27062.44000000,
    27061.63000000,
    27061.32000000,
    27063.83000000,
    27067.86000000,
    27069.66000000,
    27056.49000000,
    27055.72000000,
    27056.63000000,
    27055.68000000,
    27068.59000000,
    27070.00000000,
    27067.89000000,
    27069.97000000,
    27072.44000000,
    27070.75000000,
    27070.75000000,
    27070.75000000,
    27070.75000000,
    27070.74000000,
    27071.30000000,
    27068.01000000,
    27071.73000000,
    27071.74000000,
    27071.73000000,
    27071.73000000,
    27070.58000000,
    27070.57000000,
    27070.57000000,
    27071.72000000,
    27074.99000000,
    27075.00000000,
    27077.99000000,
    27084.12000000,
    27087.93000000,
    27087.93000000,
    27092.59000000,
    27092.58000000,
    27092.58000000,
    27082.38000000,
    27080.51000000,
    27084.69000000,
    27089.10000000,
    27097.48000000,
    27096.96000000,
    27098.02000000,
    27099.99000000,
    27099.99000000,
    27096.18000000,
    27091.10000000,
    27088.96000000,
    27088.97000000,
    27088.96000000,
    27088.02000000,
    27090.03000000,
    27090.03000000,
    27089.38000000,
    27089.60000000,
    27089.61000000,
    27089.33000000,
    27089.61000000,
    27096.07000000,
    27093.75000000,
    27104.20000000,
    27129.99000000,
    27120.49000000,
    27123.19000000,
    27115.01000000,
    27111.06000000,
    27111.05000000,
    27111.06000000,
    27101.99000000,
    27108.42000000,
    27104.24000000,
    27103.63000000,
    27108.29000000,
    27116.01000000,
    27116.53000000,
    27123.64000000,
    27130.00000000,
    27112.81000000,
    27112.15000000,
    27121.29000000,
    27117.41000000,
    27122.28000000,
    27132.28000000,
    27134.68000000,
    27125.12000000,
    27132.56000000,
    27128.85000000,
    27133.86000000,
    27131.24000000,
    27130.01000000,
    27130.12000000,
    27130.12000000,
    27132.44000000,
    27136.71000000,
    27138.66000000,
    27139.72000000,
    27149.01000000,
    27138.01000000,
    27143.20000000,
    27147.92000000,
    27148.83000000,
    27148.82000000,
    27149.66000000,
    27140.01000000,
    27130.87000000,
    27149.66000000,
    27145.47000000,
    27136.86000000,
    27144.86000000,
    27145.46000000,
    27148.03000000,
    27143.29000000,
    27143.29000000,
    27130.01000000,
    27107.56000000,
    27098.42000000,
    27107.95000000,
    27107.95000000,
    27107.94000000,
    27107.94000000,
    27107.95000000,
    27107.94000000,
    27107.95000000,
    27107.94000000,
    27115.04000000,
    27116.01000000,
    27118.11000000,
    27124.61000000,
    27124.61000000,
    27117.96000000,
    27124.43000000,
    27111.59000000,
    27112.15000000,
    27115.95000000,
    27117.80000000,
    27116.85000000,
    27116.85000000,
    27116.85000000,
    27116.85000000,
    27114.27000000,
    27111.61000000,
    27111.62000000,
    27115.73000000,
    27107.95000000,
    27107.95000000,
    27107.95000000,
    27107.95000000,
    27114.99000000,
    27108.37000000,
    27111.67000000,
    27114.74000000,
    27114.74000000,
    27115.50000000,
    27115.72000000,
    27114.44000000,
    27114.42000000,
    27114.43000000,
    27111.31000000,
    27102.65000000,
    27096.36000000,
    27100.82000000,
    27100.81000000,
    27098.56000000,
    27098.30000000,
    27096.70000000,
    27095.09000000,
    27094.99000000,
    27095.00000000,
    27092.92000000,
    27091.40000000,
    27086.74000000,
    27092.84000000,
    27095.08000000,
    27109.71000000,
    27112.58000000,
    27115.75000000,
    27115.75000000,
    27115.75000000,
    27115.74000000,
    27119.99000000,
    27130.00000000,
    27125.88000000,
    27136.56000000,
    27136.38000000,
    27133.86000000,
    27133.87000000,
    27130.98000000,
    27130.28000000,
    27133.82000000,
    27134.75000000,
    27134.73000000,
    27140.51000000,
    27144.82000000,
    27140.80000000,
    27144.00000000,
    27144.03000000,
    27145.01000000,
    27146.31000000,
    27147.20000000,
    27148.49000000,
    27153.10000000,
    27153.30000000,
    27151.77000000,
    27153.97000000,
    27132.12000000,
    27134.11000000,
    27135.47000000,
    27142.66000000,
    27147.91000000,
    27154.66000000,
    27148.85000000,
    27152.12000000,
    27150.39000000,
    27145.28000000,
    27146.94000000,
    27150.77000000,
    27153.97000000,
    27150.46000000,
    27150.46000000,
    27150.46000000,
    27155.47000000,
    27159.67000000,
    27186.26000000,
    27161.89000000,
    27154.99000000,
    27151.00000000,
    27155.86000000,
    27153.47000000,
    27162.30000000,
    27178.12000000,
    27182.76000000,
    27183.72000000,
    27200.00000000,
    27219.15000000,
    27223.04000000,
    27202.52000000,
    27210.00000000,
    27191.36000000,
    27219.65000000,
    27220.00000000,
    27223.44000000,
    27217.69000000,
    27205.41000000,
    27197.15000000,
    27188.67000000,
    27176.28000000,
    27189.41000000,
    27190.91000000,
    27199.44000000,
    27195.87000000,
    27188.09000000,
    27188.09000000,
    27188.09000000,
    27181.75000000,
    27200.00000000,
    27203.01000000,
    27212.59000000,
    27229.99000000,
    27216.91000000,
    27214.38000000,
    27216.68000000,
    27215.63000000,
    27219.57000000,
    27219.49000000,
    27216.81000000,
    27214.07000000,
    27217.77000000,
    27224.91000000,
    27225.66000000,
    27226.11000000,
    27228.71000000,
    27237.00000000,
    27230.02000000,
    27248.38000000,
    27265.01000000,
    27251.15000000,
    27257.70000000,
    27267.55000000,
    27289.07000000,
    27267.63000000,
    27244.99000000,
    27256.95000000,
    27246.83000000,
    27249.44000000,
    27239.69000000,
    27239.70000000,
    27231.01000000,
    27231.77000000,
    27231.01000000,
    27231.01000000,
    27222.40000000,
    27207.99000000,
    27207.68000000,
    27216.87000000,
    27222.00000000,
    27239.82000000,
    27220.22000000,
    27201.21000000,
    27197.91000000,
    27198.00000000,
    27194.81000000,
    27194.83000000,
    27189.37000000,
    27190.84000000,
    27190.84000000,
    27191.80000000,
    27189.38000000,
    27196.62000000,
    27191.79000000,
    27188.55000000,
    27178.53000000,
    27171.33000000,
    27176.29000000,
    27171.34000000,
    27188.20000000,
    27190.53000000,
    27196.00000000,
    27196.17000000,
    27196.18000000,
    27193.62000000,
    27193.61000000,
    27191.04000000,
    27191.05000000,
    27191.04000000,
    27203.64000000,
    27205.26000000,
    27210.01000000,
    27200.59000000,
    27193.00000000,
    27185.52000000,
    27174.12000000,
    27173.57000000,
    27187.24000000,
    27181.29000000,
    27176.45000000,
    27170.86000000,
    27170.01000000,
    27175.84000000,
    27179.01000000,
    27179.02000000,
    27179.11000000,
    27184.53000000,
    27174.03000000,
    27170.03000000,
    27173.64000000,
    27191.46000000,
    27196.29000000,
    27191.19000000,
    27200.00000000,
    27187.88000000,
    27183.04000000,
    27183.04000000,
    27186.87000000,
    27191.07000000,
    27192.35000000,
    27202.03000000,
    27204.04000000,
    27208.67000000,
    27206.24000000,
    27208.80000000,
    27213.15000000,
    27222.97000000,
    27220.24000000,
    27218.32000000,
    27220.98000000,
    27232.65000000,
    27237.33000000,
    27230.01000000,
    27231.84000000,
    27222.99000000,
    27221.55000000,
    27220.93000000,
    27215.01000000,
    27207.33000000,
    27188.84000000,
    27183.03000000,
    27175.43000000,
    27175.43000000,
    27184.18000000,
    27182.34000000,
    27194.90000000,
    27192.51000000,
    27195.89000000,
    27198.62000000,
    27196.21000000,
    27195.06000000,
    27187.71000000,
    27189.79000000,
    27170.03000000,
    27172.78000000,
    27174.01000000,
    27171.17000000,
    27173.72000000,
    27151.89000000,
    27153.68000000,
    27150.95000000,
    27148.99000000,
    27151.73000000,
    27159.14000000,
    27156.30000000,
    27151.75000000,
    27151.75000000,
    27146.24000000,
    27137.02000000,
    27132.97000000,
    27146.52000000,
    27146.91000000,
    27154.39000000,
    27154.69000000,
    27155.47000000,
    27145.42000000,
    27148.69000000,
    27148.45000000,
    27152.47000000,
    27164.99000000,
    27171.00000000,
    27170.01000000,
    27150.01000000,
    27160.67000000,
    27171.02000000,
    27177.18000000,
    27177.64000000,
    27181.62000000,
    27180.00000000,
    27187.04000000,
    27189.99000000,
    27182.29000000,
    27182.29000000,
    27191.37000000,
    27190.01000000,
    27194.23000000,
    27189.42000000,
    27189.41000000,
    27189.42000000,
    27196.91000000,
    27199.79000000,
    27199.14000000,
    27196.57000000,
    27196.61000000,
    27196.61000000,
    27194.01000000,
    27181.66000000,
    27177.61000000,
    27180.36000000,
    27188.50000000,
    27190.10000000,
    27193.98000000,
    27196.33000000,
    27189.96000000,
    27189.08000000,
    27181.69000000,
    27177.51000000,
    27173.05000000,
    27167.95000000,
    27163.00000000,
    27150.09000000,
    27149.97000000,
    27149.99000000,
    27150.00000000,
    27154.99000000,
    27150.97000000,
    27151.13000000,
    27155.00000000,
    27160.93000000,
    27164.10000000,
    27163.21000000,
    27162.21000000,
    27163.85000000,
    27163.85000000,
    27164.75000000,
    27162.22000000,
    27162.23000000,
    27158.36000000,
    27157.52000000,
    27157.51000000,
    27162.14000000,
    27168.80000000,
    27167.12000000,
    27164.26000000,
    27165.46000000,
    27170.00000000,
    27161.06000000,
    27151.80000000,
    27150.01000000,
    27149.09000000,
    27155.28000000,
    27170.50000000,
    27171.77000000,
    27176.29000000,
    27179.35000000,
    27172.92000000,
    27171.38000000,
    27164.01000000,
    27167.81000000,
    27173.84000000,
    27183.77000000,
    27195.93000000,
    27185.35000000,
    27180.00000000,
    27175.34000000,
    27176.76000000,
    27179.91000000,
    27179.91000000,
    27182.39000000,
    27185.66000000,
    27185.67000000,
    27192.04000000,
    27189.85000000,
    27186.54000000,
    27186.53000000,
    27190.93000000,
    27209.80000000,
    27206.57000000,
    27206.25000000,
    27195.52000000,
    27195.09000000,
    27200.01000000,
    27202.93000000,
    27199.94000000,
    27194.51000000,
    27194.51000000,
    27202.33000000,
    27202.27000000,
    27203.31000000,
    27203.50000000,
    27209.17000000,
    27209.18000000,
    27209.18000000,
    27209.89000000,
    27204.11000000,
    27209.81000000,
    27222.21000000,
    27225.76000000,
    27216.45000000,
    27228.85000000,
    27223.29000000,
    27219.47000000,
    27198.38000000,
    27187.38000000,
    27187.37000000,
    27185.01000000,
    27195.42000000,
    27191.48000000,
    27182.99000000,
    27160.74000000,
    27150.80000000,
    27135.53000000,
    27118.44000000,
    27109.58000000,
    27112.58000000,
    27108.84000000,
    27112.47000000,
    27120.73000000,
    27132.61000000,
    27133.25000000,
    27110.19000000,
    27106.22000000,
    27126.41000000,
    27129.58000000,
    27126.40000000,
    27129.99000000,
    27113.19000000,
    27103.56000000,
    27115.50000000,
    27111.15000000,
    27111.14000000,
    27119.79000000,
    27127.29000000,
    27136.03000000,
    27116.99000000,
    27128.24000000,
    27137.23000000,
    27137.40000000,
    27126.47000000,
    27127.92000000,
    27132.94000000,
    27134.47000000,
    27131.80000000,
    27128.44000000,
    27132.02000000,
    27129.92000000,
    27132.01000000,
    27142.74000000,
    27134.21000000,
    27111.91000000,
    27115.66000000,
    27122.67000000,
    27122.67000000,
    27125.03000000,
    27126.42000000,
    27126.23000000,
    27121.07000000,
    27132.98000000,
    27135.00000000,
    27130.50000000,
    27130.64000000,
    27132.88000000,
    27130.02000000,
    27130.02000000,
    27132.43000000,
    27134.16000000,
    27138.95000000,
    27139.35000000,
    27133.78000000,
    27133.78000000,
    27149.99000000,
    27144.18000000,
    27135.15000000,
    27135.00000000,
    27133.01000000,
    27133.00000000,
    27133.00000000,
    27134.69000000,
    27134.69000000,
    27138.00000000,
    27135.18000000,
    27134.12000000,
    27133.61000000,
    27138.79000000,
    27149.28000000,
    27155.84000000,
    27155.85000000,
    27151.65000000,
    27151.06000000,
    27153.17000000,
    27153.17000000,
    27153.18000000,
    27145.52000000,
    27143.65000000,
    27142.04000000,
    27142.05000000,
    27148.37000000,
    27147.57000000,
    27145.34000000,
    27145.34000000,
    27142.76000000,
    27142.01000000,
    27138.09000000,
    27145.58000000,
    27150.13000000,
    27151.16000000,
    27154.99000000,
    27140.45000000,
    27131.97000000,
    27136.68000000,
    27134.12000000,
    27134.11000000,
    27137.40000000,
    27130.63000000,
    27130.63000000,
    27130.62000000,
    27133.54000000,
    27131.74000000,
    27131.70000000,
    27126.52000000,
    27122.36000000,
    27122.36000000,
    27131.71000000,
    27131.70000000,
    27131.70000000,
    27122.87000000,
    27122.87000000,
    27122.88000000,
    27122.87000000,
    27121.78000000,
    27114.88000000,
    27110.01000000,
    27107.44000000,
    27097.11000000,
    27090.43000000,
    27094.22000000,
    27110.01000000,
    27100.72000000,
    27100.72000000,
    27105.78000000,
    27107.95000000,
    27125.01000000,
    27127.57000000,
    27135.05000000,
    27125.88000000,
    27124.03000000,
    27124.03000000,
    27118.73000000,
    27106.96000000,
    27106.96000000,
    27108.35000000,
    27112.19000000,
    27112.19000000,
    27118.10000000,
    27127.18000000,
    27127.18000000,
    27122.28000000,
    27124.93000000,
    27139.90000000,
    27139.91000000,
    27130.00000000,
    27133.01000000,
    27138.13000000,
    27138.13000000,
    27138.14000000,
    27138.15000000,
    27138.15000000,
    27138.48000000,
    27132.76000000,
    27132.77000000,
    27132.76000000,
    27113.85000000,
    27113.81000000,
    27106.69000000,
    27113.20000000,
    27116.85000000,
    27116.03000000,
    27116.03000000,
    27115.89000000,
    27127.78000000,
    27126.58000000,
    27122.76000000,
    27123.98000000,
    27122.75000000,
    27125.09000000,
    27114.78000000,
    27107.06000000,
    27107.06000000,
    27106.29000000,
    27097.22000000,
    27083.17000000,
    27092.43000000,
    27104.87000000,
    27097.61000000,
    27088.31000000,
    27089.58000000,
    27082.71000000,
    27089.87000000,
    27063.00000000,
    27071.69000000,
    27062.61000000,
    27060.08000000,
    27074.86000000,
    27085.59000000,
    27088.16000000,
    27082.31000000,
    27075.01000000,
    27063.16000000,
    27076.52000000,
    27063.86000000,
    27074.99000000,
    27072.35000000,
    27065.07000000,
    27073.66000000,
    27079.35000000,
    27090.47000000,
    27084.24000000,
    27095.11000000,
    27090.02000000,
    27090.01000000,
    27086.19000000,
    27089.52000000,
    27093.60000000,
    27097.04000000,
    27097.04000000,
    27096.93000000,
    27091.75000000,
    27099.60000000,
    27090.34000000,
    27077.92000000,
    27076.24000000,
    27083.33000000,
    27086.46000000,
    27086.47000000,
    27080.98000000,
    27086.46000000,
    27096.52000000,
    27098.85000000,
    27094.72000000,
    27087.65000000,
    27090.84000000,
    27090.94000000,
    27096.39000000,
    27096.38000000,
    27099.09000000,
    27096.40000000,
    27100.00000000,
    27099.08000000,
    27099.13000000,
    27090.25000000,
    27080.99000000,
    27083.69000000,
    27077.43000000,
    27081.70000000,
    27086.56000000,
    27093.32000000,
    27091.77000000,
    27091.77000000,
    27091.11000000,
    27089.07000000,
    27089.07000000,
    27093.05000000,
    27091.34000000,
    27091.42000000,
    27091.17000000,
    27080.72000000,
    27080.72000000,
    27084.64000000,
    27092.05000000,
    27092.06000000,
    27096.14000000,
    27096.13000000,
    27090.00000000,
    27089.32000000,
    27087.66000000,
    27087.24000000,
    27087.24000000,
    27087.23000000,
    27097.96000000,
    27097.95000000,
    27089.33000000,
    27096.75000000,
    27089.35000000,
    27089.34000000,
    27093.91000000,
    27089.35000000,
    27076.37000000,
    27079.34000000,
    27080.00000000,
    27082.34000000,
    27090.09000000,
    27090.32000000,
    27092.13000000,
    27093.01000000,
    27093.00000000,
    27096.49000000,
    27093.64000000,
    27095.01000000,
    27095.02000000,
    27103.36000000,
    27095.59000000,
    27096.38000000,
    27095.38000000,
    27102.43000000,
    27102.43000000,
    27102.44000000,
    27102.43000000,
    27102.44000000,
    27106.05000000,
    27106.94000000,
    27106.75000000,
    27106.74000000,
    27101.56000000,
    27101.55000000,
    27107.75000000,
    27107.74000000,
    27107.75000000,
    27104.79000000,
    27100.62000000,
    27102.56000000,
    27102.57000000,
    27103.93000000,
    27104.18000000,
    27104.19000000,
    27104.19000000,
    27105.00000000,
    27097.30000000,
    27095.00000000,
    27095.01000000,
    27099.70000000,
    27099.71000000,
    27103.02000000,
    27102.28000000,
    27081.17000000,
    27063.38000000,
    27041.37000000,
    27070.00000000,
    27066.88000000,
    27068.33000000,
    27081.88000000,
    27092.07000000,
    27087.80000000,
    27103.59000000,
    27110.99000000,
    27140.26000000,
    27130.52000000,
    27136.30000000,
    27146.99000000,
    27129.50000000,
    27129.54000000,
    27113.99000000,
    27119.31000000,
    27125.91000000,
    27128.20000000,
    27122.73000000,
    27128.25000000,
    27126.29000000,
    27123.24000000,
    27121.81000000,
    27115.01000000,
    27115.73000000,
    27114.07000000,
    27108.09000000,
    27083.90000000,
    27073.82000000,
    27082.75000000,
    27077.90000000,
    27066.64000000,
    27072.29000000,
    27090.09000000,
    27087.47000000,
    27085.31000000,
    27093.38000000,
    27091.79000000,
    27098.78000000,
    27098.77000000,
    27099.42000000,
    27114.99000000,
    27111.04000000,
    27109.48000000,
    27111.04000000,
    27114.39000000,
    27110.51000000,
    27101.36000000,
    27101.33000000,
    27103.28000000,
    27110.00000000,
    27109.99000000,
    27107.10000000,
    27109.04000000,
    27107.91000000,
    27109.75000000,
    27109.75000000,
    27123.31000000,
    27124.99000000,
    27126.72000000,
    27126.71000000,
    27126.72000000,
    27132.68000000,
    27127.55000000,
    27125.45000000,
    27117.28000000,
    27114.35000000,
    27100.02000000,
    27095.50000000,
    27094.32000000,
    27099.19000000,
    27099.20000000,
    27099.18000000,
    27103.48000000,
    27106.39000000,
    27118.22000000,
    27123.61000000,
    27119.70000000,
    27119.69000000,
    27119.69000000,
    27119.70000000,
    27125.64000000,
    27122.23000000,
    27122.23000000,
    27128.78000000,
    27131.04000000,
    27132.23000000,
    27130.71000000,
    27130.71000000,
    27130.71000000,
    27130.70000000,
    27126.88000000,
    27126.89000000,
    27125.13000000,
    27124.11000000,
    27124.11000000,
    27126.35000000,
    27126.88000000,
    27133.50000000,
    27147.65000000,
    27159.79000000,
    27143.30000000,
    27143.30000000,
    27143.30000000,
    27143.30000000,
    27143.30000000,
    27143.61000000,
    27143.60000000,
    27144.86000000,
    27144.86000000,
    27144.85000000,
    27144.86000000,
    27156.21000000,
    27157.46000000,
    27158.07000000,
    27180.37000000,
    27189.28000000,
    27169.36000000,
    27170.33000000,
    27170.33000000,
    27165.83000000,
    27155.00000000,
    27164.03000000,
    27169.92000000,
    27179.99000000,
    27185.56000000,
    27193.65000000,
    27193.24000000,
    27191.96000000,
    27190.59000000,
    27225.15000000,
    27440.76000000,
    27392.04000000,
    27994.54000000,
    27872.69000000,
    27861.39000000,
    27750.57000000,
    27799.18000000,
    27796.27000000,
    27864.05000000,
    27920.55000000,
    27870.01000000,
    27907.66000000,
    27860.31000000,
    27877.77000000,
    27871.69000000,
    27949.78000000,
    27952.14000000,
    28010.00000000,
    28049.99000000,
    28025.13000000,
    27979.54000000,
    28001.48000000,
    27991.13000000,
    27927.35000000,
    27916.52000000,
    27880.90000000,
    27842.81000000,
    27865.42000000,
    27911.88000000,
    27937.25000000,
    27913.70000000,
    27934.99000000,
    27923.83000000,
    27919.99000000,
    27921.99000000,
    27939.99000000,
    27939.25000000,
    27973.31000000,
    27945.01000000,
    27945.03000000,
    27950.46000000,
    27957.17000000,
    27964.85000000,
    27972.81000000,
    27996.43000000,
    27977.68000000,
    28022.87000000,
    27998.60000000,
    27983.61000000,
    27970.60000000,
    27955.89000000,
    27994.99000000,
    28001.62000000,
    27966.98000000,
    27916.48000000,
    27934.76000000,
    27915.02000000,
    27876.64000000,
    27888.92000000,
    27888.63000000,
    27911.30000000,
    27938.41000000,
    27955.89000000,
    27949.84000000,
    27930.07000000,
    27949.32000000,
    27951.76000000,
    27947.24000000,
    27969.33000000,
    27968.14000000,
    27945.75000000,
    27939.06000000,
    27920.01000000,
    27879.11000000,
    27890.26000000,
    27908.98000000,
    27869.72000000,
    27882.60000000,
    27884.57000000,
    27918.18000000,
    27919.54000000,
    27924.77000000,
    27943.12000000,
    27940.55000000,
    27940.87000000,
    27960.00000000,
    27962.72000000,
    27969.01000000,
    27948.49000000,
    27968.66000000,
    27941.16000000,
    27969.99000000,
    27971.30000000,
    27963.02000000,
    27970.41000000,
    27983.29000000,
    27977.55000000,
    27972.89000000,
    27970.59000000,
    27978.10000000,
    27967.44000000,
    27966.34000000,
    27983.63000000,
    27986.37000000,
    27992.57000000,
]

// Configurações dos indicadores
const emaPeriod = 9; // EMA de 9 períodos
const bbPeriod = 20; // Bandas de Bollinger com 20 períodos
const bbStdDev = 2;  // Desvio padrão de 2
const rsiPeriod = 14; // RSI de 14 períodos

// Saldo inicial
let usdBalance = 50; // Saldo inicial em USD
let btcBalance = 0;     // Saldo inicial em BTC
const tradeFee = 0.001; // Taxa de corretagem (0.1%)

// Função para calcular os indicadores
function calculateIndicators(closes) {
    // Calcula a EMA 9
    const ema = EMA.calculate({ period: emaPeriod, values: closes });

    // Calcula as Bandas de Bollinger
    const bb = BollingerBands.calculate({
        period: bbPeriod,
        values: closes,
        stdDev: bbStdDev
    });

    // Calcula o RSI 14
    const rsi = RSI.calculate({ period: rsiPeriod, values: closes });

    return { ema, bb, rsi };
}

// Função para simular compras e vendas
function simulateTrades(closes) {
    const { ema, bb, rsi } = calculateIndicators(closes);

    let position = null; // null = sem posição, 'long' = comprado, 'short' = vendido
    const trades = [];

    for (let i = bbPeriod - 1; i < closes.length; i++) {
        const price = closes[i];
        const emaValue = ema[i - emaPeriod + 1];
        const bbValue = bb[i - bbPeriod + 1];
        const rsiValue = rsi[i - rsiPeriod + 1];

        console.log(`Candle ${i}: Preço = ${price}, EMA = ${emaValue}, Banda Inferior = ${bbValue.lower}, RSI = ${rsiValue}, position: ${position}`);

        // Condições para compra (Long)
        /*console.log(
            position != 'long', // Não está comprado
            price <= bbValue.lower.toFixed(2), Number(price), bbValue.lower.toFixed(2), // Preço próximo à Banda Inferior
            rsiValue < 30 // RSI em sobrevenda
        )*/
            console.log(
                position != 'long', // Não está comprado
                price <= bbValue.lower, // Preço próximo à Banda Inferior
                rsiValue < 30 // RSI em sobrevenda
            )
            console.log(price, bbValue.lower);
        if (
            position != 'long' && // Não está comprado
            price <= bbValue.lower && // Preço próximo à Banda Inferior
            rsiValue < 30 // RSI em sobrevenda
        ) {
            // Calcula a quantidade de BTC que pode ser comprada
            const btcAmount = (usdBalance * (1 - tradeFee)) / price;
            btcBalance += btcAmount;
            usdBalance = 0;

            position = 'long';
            trades.push({ type: 'buy', price, time: i, btcBalance, usdBalance });
            console.log(`Compra realizada a $${price}`);
        }

        // Condições para venda (Short)
        if (
            position === 'long' && // Está comprado
            (price >= bbValue.upper || rsiValue > 70) // Saída por banda ou RSI
        ) {
            // Vende o BTC e converte para USD
            usdBalance = btcBalance * price * (1 - tradeFee);
            btcBalance = 0;

            position = null;
            trades.push({ type: 'sell', price, time: i, btcBalance, usdBalance });
            console.log(`Venda realizada a $${price}`);
        }
    }

    return trades;
}

// Executa a simulação
const trades = simulateTrades(closes);

// Exibe os trades realizados
console.log("Trades realizados:");
trades.forEach((trade, index) => {
    console.log(`Trade ${index + 1}: ${trade.type} a $${trade.price} no candle ${trade.time}`);
    console.log(`  Saldo: ${trade.btcBalance.toFixed(8)} BTC | $${trade.usdBalance.toFixed(2)} USD`);
});

// Calcula o lucro final
const finalBalance = usdBalance + (btcBalance * closes[closes.length - 1]);
const initialBalance = 50;
const profit = finalBalance - initialBalance;

console.log("\nResumo Final:");
console.log(`Saldo Inicial: $${initialBalance.toFixed(2)} USD`);
console.log(`Saldo Final: $${finalBalance.toFixed(2)} USD`);
console.log(`Lucro/Prejuízo: $${profit.toFixed(2)} USD`);